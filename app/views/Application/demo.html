#{extends 'main.html' /}
#{set title:'Demo' /}

#{set 'moreScripts'}
    #{scripts /}
#{/set}

#{set 'moreStyles'}
    <style type="text/css" media="screen">
        body {
            margin: 0;
            padding: 0;
            background-color: #333;
        }
        #world {background: transparent;}
        #control {display: none;}
    </style>
#{/set}

<div id="wrapper">
	<header>
	</header>
	<div id="map">
	    <canvas id="world" width="1920" height="960"></canvas>
	</div>
	<footer>
		<ul id="players">
			<li><a href="#" id="start">Start</a> - <a href="#" id="labels">Draw labels</a> - <a href="#" id="scans">Show scans</a> - <a href="#" id="restart">Restart</a></li>
			<li>Earl</li>
			<li>Gre</li>
			<li>JeanSeb</li>
			<li>Warry</li>
		</ul>
	</footer>
</div>
<div id="debug">
	Put all your debug stuffs here.
	Go to /#debug to display it!
</div>

<script type="text/javascript" charset="utf-8">
    var robotURL = #{jsAction @robot(':name')/}
        
    
    var sitting = new RobotDescription(robotURL({name: 'sitting'}))
    //var tracker = new RobotDescription(robotURL({name: 'tracker'}))
    var walls = new RobotDescription(robotURL({name: 'walls'}))
    var crazy = new RobotDescription(robotURL({name: 'crazy'}))  
    
    var game = new Game('world', [sitting, crazy, crazy, walls, walls, crazy], function() {
        //$('#control').show()
    })
    
    $('#start').click(function() {
        switch($(this).html()) {
            
            case 'Pause':
                game.stop()
                $(this).html('Continue')
                break
                
            default:
                game.start()
                $(this).html('Pause')
                break
            
        }
    })    
    
    $('#labels').click(function() {
        switch($(this).html()) {
            
            case 'Draw labels':
                Configuration.drawText = true
                game.repaint()
                $(this).html('Hide labels')
                break
                
            default:
                Configuration.drawText = false
                game.repaint()
                $(this).html('Draw labels')
                break
            
        }
    })
    
    $('#scans').click(function() {
        switch($(this).html()) {
            
            case 'Show scans':
                Configuration.scanVisible = true
                game.repaint()
                $(this).html('Hide scans')
                break
                
            default:
                Configuration.scanVisible = false
                game.repaint()
                $(this).html('Show scans')
                break
            
        }
    })
    
    $('#restart').click(function() {
        
        //game.restart()
        // Test dynamic loading
        window.tracker = new RobotDescription(robotURL({name: 'tracker'}));
        game.reloadAll('world', [sitting, tracker, walls, crazy, crazy, crazy, crazy, crazy, tracker, tracker, tracker], function() {
        
        });
        $('#start').html('Start');
        
    })
    
</script>


